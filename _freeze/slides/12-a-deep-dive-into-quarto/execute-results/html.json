{
  "hash": "b4a7e3bb39f1cec8a592f11a52353eb5",
  "result": {
    "markdown": "---\ntitle: \"A deep dive into Quarto\"\nsubtitle: \"Lecture 12\"\ndate: \"March 7, 2023\"\nformat: revealjs\nexecute:\n  echo: false\n---\n\n\n\n\n# Announcements\n\n## Announcements\n\n- Not much happening this week\n\n# Setup\n\n## `ae-quarto`\n\n::: appex\n- Go to the course [GitHub org](https://github.coecis.cornell.edu/info2950-s23/) and find your `ae-quarto` (repo name will be suffixed with your GitHub name).\n- Clone the repo in RStudio Workbench, open the Quarto document in the repo, and follow along and complete the exercises.\n:::\n\n## Packages + figures\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse)\nlibrary(rcis)\nlibrary(here)\nlibrary(countdown)\n\n# set default theme for ggplot2\ntheme_set(theme_minimal(base_size = 12))\n```\n:::\n\n\n## YAML options\n\n```yaml\nknitr:\n  opts_chunk:\n    fig.width: 7\n    fig.asp: 0.618\n    fig.retina: 2\n    dpi: 150\n    out.width: \"80%\"\n    fig.showtext: true\n```\n\n# Quarto\n\n---\n\n![](images/12/data-science/base.png)\n\n---\n\n## Quarto basics {.smaller}\n\n\n::: {.cell layout-align=\"center\" file='extras/gun-deaths.qmd' hash='12-a-deep-dive-into-quarto_cache/revealjs/unnamed-chunk-3_12656ef3ef3e5a3a7760944d6fcf046c'}\n\n````qmd\n---\ntitle: Gun deaths\nauthor: Your name\ndate: March 7, 2023\nformat: html\n---\n\n```{r setup}\n#| include: false\nlibrary(tidyverse)\nlibrary(rcis)\n\nyouth <- gun_deaths |>\n  filter(age <= 65)\n```\n\n# Gun deaths by age\n\nWe have data about `r nrow(gun_deaths)` individuals killed by guns. Only `r nrow(gun_deaths) - nrow(youth)` are older than 65. The distribution of the remainder is shown below:\n\n```{r youth-dist}\n#| echo: false\nyouth |> \n  ggplot(aes(age)) + \n  geom_freqpoly(binwidth = 1)\n```\n\n# Gun deaths by race\n\n```{r race-dist}\nyouth |>\n  ggplot(aes(fct_infreq(race) |> fct_rev())) +\n  geom_bar() +\n  coord_flip() +\n  labs(x = \"Victim race\")\n```\n````\n:::\n\n\n## Major components\n\n1. A **YAML header** surrounded by `---`s\n1. **Chunks** of code surounded by ` ``` `\n1. Text mixed with simple text formatting using the [Markdown syntax](https://quarto.org/docs/authoring/markdown-basics.html)\n\n# Quarto code chunks\n\n## Rendering process\n\n![](images/12/qmd_render_schema.png){fig-alt=\"A schematic representing rendering of Quarto documents from .qmd, to knitr or jupyter, to plain text markdown, then converted by pandoc into any number of output types including html, PDF, or Word document.\"}\n\n::: aside\nArtwork from \"Hello, Quarto\" keynote by Julia Lowndes and Mine Ã‡etinkaya-Rundel, presented at RStudio Conference 2022. Illustrated by Allison Horst.\n:::\n\n## Rendering process\n\n![](images/12/quarto_schematic.png){fig-alt=\"A schematic representing the multi-language input (e.g. Python, R, Observable, Julia) and multi-format output (e.g. PDF, html, Word documents, and more) versatility of Quarto.\"}\n\n::: aside\nArtwork from \"Hello, Quarto\" keynote by Julia Lowndes and Mine Ã‡etinkaya-Rundel, presented at RStudio Conference 2022. Illustrated by Allison Horst.\n:::\n\n## ðŸ¤” AE: Edit the Quarto document\n\n* Render `gun-deaths.qmd` as an HTML document\n* Add text describing the frequency polygon\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_f9e1d919\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n## Code chunks\n\n\n\n````markdown\n```{r}\n#| label: youth-dist\n#| echo: false\n#| message: false\n#| warning: false\n\n# code goes here\n```\n\n````\n\n::: incremental\n\n* Naming code chunks\n* Code chunk options\n* `eval: false`\n* `include: false`\n* `echo: false`\n* `message: false` or `warning: false`\n* `error: true`\n* `cache: true`\n\n:::\n\n## Dependencies\n\n::: panel-tabset\n\n### Incorrect caching\n\n\n````default\n```{r}\n#| label: raw-data\nrawdata <- readr::read_csv(\"a_very_large_file.csv\")\n```\n    \n```{r}\n#| label: processed-data\n#| cache: true\nprocessed_data <- rawdata |> \n  filter(!is.na(import_var)) |> \n  mutate(new_variable = complicated_transformation(x, y, z))\n```\n````\n\n### Caching with dependencies\n\n\n\n````default\n```{r}\n#| label: raw-data\nrawdata <- readr::read_csv(\"a_very_large_file.csv\")\n```\n\n```{r}\n#| label: processed-data\n#| cache: true\n#| dependson: \"raw-data\"\nprocessed_data <- rawdata |> \n  filter(!is.na(import_var)) |> \n  mutate(new_variable = complicated_transformation(x, y, z))\n```\n\n````\n\n:::\n\n## Inline code\n\n\n\n\n````markdown\nWe have data about `r nrow(gun_deaths)` individuals killed by guns. Only `r nrow(gun_deaths) - nrow(youth)` are older than 65. The distribution of the remainder is shown below:\n````\n\n. . .\n\nWe have data about 100798 individuals killed by guns. Only 15687 are older than 65.\n\n## ðŸ¤” Modify chunk options\n\n* Set `echo: false` as a global option\n* Adjust the figure height and width options for the code chunks with plots\n* Enable caching for each chunk and render the document. Look at the file structure for the cache. Now render the document again. Does it run faster?\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_55c28831\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">07</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n# YAML header\n\n\n## YAML header\n\n```verbatim\n---\ntitle: Gun deaths\nauthor: Benjamin Soltoff\ndate: March 07, 2023\nformat: html\n---\n```\n\n* **Y**et **A**nother **M**arkup **L**anguage\n* Standardized format for storing hierarchical data in a human-readable syntax\n* Defines how `quarto` renders your `.qmd` file\n\n## HTML document\n\n```verbatim\n---\ntitle: Gun deaths\nauthor: Benjamin Soltoff\ndate: March 07, 2023\nformat: html\n---\n```\n\n## Table of contents\n\n```verbatim\n---\ntitle: Gun deaths\nauthor: Benjamin Soltoff\ndate: March 07, 2023\nformat:\n  html:\n    toc: true\n    toc-depth: 2\n---\n```\n\n## Appearance and style\n\n```verbatim\n---\ntitle: Gun deaths\nauthor: Benjamin Soltoff\ndate: March 07, 2023\nformat:\n  html:\n    theme: superhero\n    highlight-style: github\n---\n```\n\n## Global options\n\n````verbatim\n---\ntitle: \"My Document\"\nformat: html\nexecute:\n  echo: true\n  message: false\nknitr:\n  opts_chunk: \n    fig-width: 7\n---\n````\n\n- Default document-level options\n- Some options are set with [`execute`](https://quarto.org/docs/reference/formats/html.html#execution)\n\n## ðŸ¤” Modify YAML options\n\n* Add a table of contents\n* Use the `\"minty\"` theme\n* Modify the figures so they are 8 inches wide by 6 inches tall\n* Set code chunk options globally\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_bd7954bb\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">07</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n## PDF document\n\n```verbatim\n---\ntitle: Gun deaths\nauthor: Benjamin Soltoff\ndate: March 07, 2023\nformat: pdf\n---\n```\n\n## `render()`\n\n```r\nquarto::quarto_render(\"my-document.qmd\", output_format = \"html\")\nquarto::quarto_render(\"my-document.qmd\", output_format = \"all\")\n```\n\n---\n\n## R scripts {.smaller}\n\n\n::: {.cell layout-align=\"center\" file='extras/gun-deaths.R' hash='12-a-deep-dive-into-quarto_cache/revealjs/unnamed-chunk-12_d41c32e59cc57a4d6b0d3cf0bae174fc'}\n\n````r\n# gun-deaths.R\n# 2022-03-07\n# Examine the distribution of age of victims in gun_deaths\n\n# load packages\nlibrary(tidyverse)\nlibrary(rcis)\n\n# filter data for under 65\nyouth <- gun_deaths |>\n  filter(age <= 65)\n\n# number of individuals under 65 killed\nnrow(gun_deaths) - nrow(youth)\n\n# graph the distribution of youth\nyouth |>\n  ggplot(aes(age)) +\n  geom_freqpoly(binwidth = 1)\n\n# graph the distribution of youth, by race\nyouth |>\n  ggplot(aes(fct_infreq(race) |> fct_rev())) +\n  geom_bar() +\n  coord_flip() +\n  labs(x = \"Victim race\")\n````\n:::\n\n\n## When to use a script\n\n* For troubleshooting\n* Initial stages of project\n* Building a reproducible pipeline\n* It depends\n\n. . .\n\n#### Running scripts\n\n* Interactively\n* Programmatically using `source()`\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}