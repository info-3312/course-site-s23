{
  "hash": "7779cb1fa9045e072fe93df93e68cd62",
  "result": {
    "markdown": "---\ntitle: \"Look at data\"\nsubtitle: \"Lecture 3\"\ndate: \"January 31, 2023\"\nformat: revealjs\n---\n\n\n\n\n# Take a sad plot, and make it better\n\n---\n\n::: {.appex .small}\nThe American Association of \nUniversity Professors (AAUP) is a nonprofit membership association of faculty \nand other academic professionals. \n[This report](https://www.aaup.org/sites/default/files/files/AAUP_Report_InstrStaff-75-11_apr2013.pdf) \nby the AAUP shows trends in instructional staff employees between 1975 \nand 2011, and contains an image very similar to the one given below.\n:::\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-2_e3e2d04d885051d22a5aa5352cda2e72'}\n::: {.cell-output-display}\n![](images/02/staff-employment.png){fig-align='center' width=80%}\n:::\n:::\n\n\n---\n\n::: small\nEach row in this dataset represents a faculty type, and the columns are the years for which we have data. \nThe values are percentage of hires of that type of faculty for each year.\n\n:::\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/load-data-staff_583020d9686c7206cddd358d667498ec'}\n\n```{.r .cell-code}\nstaff <- read_csv(\"data/instructional-staff.csv\")\nstaff\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 12\n  facult…¹ `1975` `1989` `1993` `1995` `1999` `2001` `2003` `2005` `2007` `2009`\n  <chr>     <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 Full-Ti…   29     27.6   25     24.8   21.8   20.3   19.3   17.8   17.2   16.8\n2 Full-Ti…   16.1   11.4   10.2    9.6    8.9    9.2    8.8    8.2    8      7.6\n3 Full-Ti…   10.3   14.1   13.6   13.6   15.2   15.5   15     14.8   14.9   15.1\n4 Part-Ti…   24     30.4   33.1   33.2   35.5   36     37     39.3   40.5   41.1\n5 Graduat…   20.5   16.5   18.1   18.8   18.7   19     20     19.9   19.5   19.4\n# … with 1 more variable: `2011` <dbl>, and abbreviated variable name\n#   ¹​faculty_type\n```\n:::\n:::\n\n\n## Recreate the visualization\n\nIn order to recreate this visualization we need to first reshape the data to have one variable for faculty type and one variable for year. In other words, we will convert the data from the long format to wide format. \n\nBut before we do so... \n\n::: appex\nIf the long data will have a row for each year/faculty type combination, and there are 5 faculty types and 11 years of data, how many rows will the data have?\n:::\n\n---\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-4_34fb5e084bece0284586416e0e15a84b'}\n::: {.cell-output-display}\n![](images/02/pivot.gif){fig-align='center' width=80%}\n:::\n:::\n\n\n## `pivot_*()` function\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-5_b32ddba74a3fb8ce57f231433cfc4686'}\n::: {.cell-output-display}\n![](https://raw.githubusercontent.com/gadenbuie/tidyexplain/main/images/tidyr-pivoting.gif){fig-align='center' width=50%}\n:::\n:::\n\n\n## `pivot_longer()`\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-6_2d9452528ae44b6143cc16284921d951'}\n\n```{.r .cell-code}\npivot_longer(data, cols, names_to = \"name\", values_to = \"value\")\n```\n:::\n\n\n- The first argument is `data` as usual.\n- The second argument, `cols`, is where you specify which columns to pivot \ninto longer format -- in this case all columns except for the `faculty_type` \n- The third argument, `names_to`, is a string specifying the name of the column to create from the data stored in the column names of data -- in this case `year`\n- The fourth argument, `values_to`, is a string specifying the name of the column to create from the data stored in cell values, in this case `percentage`\n\n## Pivot instructor data\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-7_af92a78a68a044748d4e0408f587016a'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nstaff_long <- staff |>\n  pivot_longer(cols = -faculty_type, names_to = \"year\", \n               values_to = \"percentage\") |>\n  mutate(percentage = as.numeric(percentage))\n\nstaff_long\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 55 × 3\n   faculty_type              year  percentage\n   <chr>                     <chr>      <dbl>\n 1 Full-Time Tenured Faculty 1975        29  \n 2 Full-Time Tenured Faculty 1989        27.6\n 3 Full-Time Tenured Faculty 1993        25  \n 4 Full-Time Tenured Faculty 1995        24.8\n 5 Full-Time Tenured Faculty 1999        21.8\n 6 Full-Time Tenured Faculty 2001        20.3\n 7 Full-Time Tenured Faculty 2003        19.3\n 8 Full-Time Tenured Faculty 2005        17.8\n 9 Full-Time Tenured Faculty 2007        17.2\n10 Full-Time Tenured Faculty 2009        16.8\n# … with 45 more rows\n```\n:::\n:::\n\n\n---\n\n::: {.appex .small}\nThis doesn't look quite right, how would you fix it?\n:::\n\n::: {.small}\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-8_09cb2b0d27b9869ccc31fe3b7d95b1bf'}\n\n```{.r .cell-code}\nstaff_long |>\n  ggplot(aes(x = percentage, y = faculty_type, color = year)) +\n  geom_col(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n---\n\n::: {.small}\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-9_1f543571d86386d1cd923521033b3e30'}\n\n```{.r .cell-code}\nstaff_long |>\n  ggplot(aes(x = percentage, y = faculty_type, fill = year)) +\n  geom_col(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n## Some improvement...\n\n::: {.small}\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-10_2a09c0fd78105fbdb2b9f19b3b311661'}\n\n```{.r .cell-code}\nstaff_long |>\n  ggplot(aes(x = percentage, y = year, fill = faculty_type)) +\n  geom_col()\n```\n\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=60%}\n:::\n:::\n\n\n:::\n\n## More improvement\n\n::: {.small}\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-11_ead7627d9ab1aa3cd68f213582ac41e7'}\n\n```{.r .cell-code}\nstaff_long |>\n  ggplot(aes(x = year, y = percentage, group = faculty_type, \n             color = faculty_type)) +\n  geom_line() +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n:::\n\n\n## Goal: even more improvement!\n\n::: appex\nI want to achieve the following look but I have no idea how!\n:::\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/instructor-lines-for-show_1ac78a72693a8696e52d0a7a139fb1bf'}\n::: {.cell-output-display}\n![](images/02/sketch.png){fig-align='center' width=60%}\n:::\n:::\n\n\n## Asking good questions\n\n- Describe what you want\n- Describe where you are\n- Create a minimal **repr**oducible **ex**ample: `reprex::reprex()`\n\n---\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-13_433f135fde7750be80378955a0ce4968'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n### Code\n\n::: small\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/instructor-lines_96e48867715f494e75fa7ea16b4a6994'}\n\n```{.r .cell-code  code-line-numbers=\"4-9,12-13,17-18,24\"}\nlibrary(scales)\n\nstaff_long |>\n  mutate(\n    part_time = if_else(faculty_type == \"Part-Time Faculty\",\n      \"Part-Time Faculty\", \"Other Faculty\"\n    ),\n    year = as.numeric(year)\n  ) |>\n  ggplot(aes(\n    x = year,\n    y = percentage / 100,\n    group = faculty_type,\n    color = part_time\n  )) +\n  geom_line() +\n  scale_color_manual(values = c(\"gray\", \"red\")) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  theme_minimal() +\n  labs(\n    title = \"Instructional staff employment trends\",\n    x = \"Year\", y = \"Percentage\", color = NULL\n  ) +\n  theme(legend.position = \"bottom\")\n```\n:::\n\n\n:::\n\n:::\n\n# A/B testing\n\n## Data: College education costs\n\n:::: columns\n\n::: {.column width=\"50%\"}\n\n- Data on four year colleges and universities in the United States (2020-21)\n\n- Extracted from College Scorecard API\n\n- Source: `rcis::scorecard`\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n{{< tweet ColIegeStudent 829377468595306500 >}}\n\n\n\n:::\n\n::::\n\n## `rcis::scorecard`\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-15_30f0987ec916343dc6e945a984d6a237'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n# remotes::install_github(\"cis-ds/rcis\")\nlibrary(rcis)\n\nglimpse(scorecard)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,721\nColumns: 14\n$ unitid    <dbl> 100654, 100663, 100706, 100724, 100751, 100830, 100858, 1009…\n$ name      <chr> \"Alabama A & M University\", \"University of Alabama at Birmin…\n$ state     <chr> \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", …\n$ type      <fct> \"Public\", \"Public\", \"Public\", \"Public\", \"Public\", \"Public\", …\n$ admrate   <dbl> 0.8965, 0.8060, 0.7711, 0.9888, 0.8039, 0.9555, 0.8507, 0.60…\n$ satavg    <dbl> 959, 1245, 1300, 938, 1262, 1061, 1302, 1202, 1068, NA, 1101…\n$ cost      <dbl> 23445, 25542, 24861, 21892, 30016, 20225, 32196, 32514, 3483…\n$ netcost   <dbl> 15529, 16530, 17208, 19534, 20917, 13678, 24018, 19808, 2050…\n$ avgfacsal <dbl> 68391, 102420, 87273, 64746, 93141, 69561, 96498, 62649, 533…\n$ pctpell   <dbl> 0.7095, 0.3397, 0.2403, 0.7368, 0.1718, 0.4654, 0.1343, 0.22…\n$ comprate  <dbl> 0.2866, 0.6117, 0.5714, 0.3177, 0.7214, 0.3040, 0.7870, 0.70…\n$ firstgen  <dbl> 0.3658281, 0.3412237, 0.3101322, 0.3434343, 0.2257127, 0.381…\n$ debt      <dbl> 15250, 15085, 14000, 17500, 17671, 12000, 17500, 16000, 1425…\n$ locale    <fct> City, City, City, City, City, City, City, City, City, Suburb…\n```\n:::\n:::\n\n\n## A simple visualization\n\n::: {.panel-tabset}\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/simple-viz_f53ef35efff5c19ee76dfdb36996a404'}\n\n```{.r .cell-code}\nggplot(scorecard, aes(x = avgfacsal, y = netcost)) +\n  geom_point(alpha = 0.5, size = 2) +\n  geom_smooth(method = \"lm\", se = FALSE, size = 0.7) +\n  labs(\n    x = \"Average faculty salary (USD)\",\n    y = \"Net cost of attendance (USD)\",\n    title = \"Faculty salaries and net cost of attendance in US universities\"\n  )\n```\n:::\n\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-17_e259d0e54aa7cf8c296300c177f689ee'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-17-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n## New variable: `pctpell_cat`\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-18_bafe304124eb233d795088b144c0c560'}\n\n```{.r .cell-code}\nscorecard <- scorecard |>\n  mutate(pctpell_cat = cut_interval(x = pctpell, n = 6)) |>\n  drop_na(pctpell_cat)\n\nscorecard |>\n  select(pctpell, pctpell_cat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,717 × 2\n   pctpell pctpell_cat  \n     <dbl> <fct>        \n 1   0.710 (0.667,0.833]\n 2   0.340 (0.333,0.5]  \n 3   0.240 (0.167,0.333]\n 4   0.737 (0.667,0.833]\n 5   0.172 (0.167,0.333]\n 6   0.465 (0.333,0.5]  \n 7   0.134 [0,0.167]    \n 8   0.226 (0.167,0.333]\n 9   0.501 (0.5,0.667]  \n10   0.697 (0.667,0.833]\n# … with 1,707 more rows\n```\n:::\n:::\n\n\n## Distribution of `pctpell_cat`\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-19_792f8d23a8263d0e282ebe3bfc7e22a5'}\n\n```{.r .cell-code}\nscorecard <- scorecard |>\n  mutate(pctpell_cat = cut_interval(x = pctpell, n = 6)) |>\n  drop_na(pctpell_cat)\n\nscorecard |>\n  count(pctpell_cat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 2\n  pctpell_cat       n\n  <fct>         <int>\n1 [0,0.167]       169\n2 (0.167,0.333]   630\n3 (0.333,0.5]     609\n4 (0.5,0.667]     205\n5 (0.667,0.833]    73\n6 (0.833,1]        31\n```\n:::\n:::\n\n\n## A slightly more complex visualization\n\n::: {.panel-tabset}\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/slight-complex-viz_be195007bcf51210dc308a35e7937206'}\n\n```{.r .cell-code}\nggplot(scorecard, aes(x = avgfacsal, y = netcost, color = pctpell_cat)) +\n  geom_point(alpha = 0.5, show.legend = FALSE) +\n  geom_smooth(method = \"lm\", se = FALSE, size = 0.5, show.legend = FALSE) +\n  facet_wrap(vars(pctpell_cat)) +\n  labs(\n    x = \"Average faculty salary (USD)\",\n    y = \"Net cost of attendance (USD)\",\n    color = \"Percentage of Pell grant recipients\",\n    title = \"Faculty salaries and net cost of attendance in US universities\"\n  )\n```\n:::\n\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-21_030f81ed31fdec3e8e2b5758479733e0'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-21-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n---\n\n::: {.appex .center}\n\nIn the next two slides, the same plots are created with different \"cosmetic\" choices. Examine the plots two given (Plot A and Plot B), and decide which one you prefer.\n\n:::\n\n## Test 1\n\n::: {.panel-tabset}\n\n### Plot A\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/test-1-a_89e04bc27937f82065494142ec1ee864'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/test-1-a-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n### Plot B\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/test-1-b_c7b52e2a0121ad889df2e78938b772a7'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/test-1-b-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n:::\n\n## Test 2\n\n::: {.panel-tabset}\n\n### Plot A\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-24_5bfb53226e889c4f79fe5a5986cfcdee'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-24-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n### Plot B\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/test-2-b_fc4c34b581978a1a46a96fc43ff6d221'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/test-2-b-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n:::\n\n---\n\n::: {.appex .center}\na deeper look at the plotting code...\n:::\n\n---\n\n## Minimal theme + viridis scale, default option\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-26_fcc8ef3b3fdf8b855d3d15762b91543a'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-26-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-27_dc85008e5822e619289a43e22cb6fbc2'}\n\n```{.r .cell-code  code-line-numbers=\"11-12\"}\nggplot(scorecard, aes(x = avgfacsal, y = netcost, color = pctpell_cat)) +\n  geom_point(alpha = 0.5, show.legend = FALSE) +\n  geom_smooth(method = \"lm\", se = FALSE, size = 0.5, show.legend = FALSE) +\n  facet_wrap(vars(pctpell_cat)) +\n  labs(\n    x = \"Average faculty salary (USD)\",\n    y = \"Net cost of attendance (USD)\",\n    color = \"Percentage of Pell grant recipients\",\n    title = \"Faculty salaries and net cost of attendance in US universities\"\n  ) +\n  theme_minimal(base_size = 14) +\n  scale_color_viridis_d(end = 0.9)\n```\n:::\n\n\n:::\n\n## Viridis scale, option A (magma)\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-28_56d6f9bb9eb537a174a23da41e2efa36'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-28-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-29_aa60c6ccf9aadab81fc2f06eb8209aac'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nggplot(scorecard, aes(x = avgfacsal, y = netcost, color = pctpell_cat)) +\n  geom_point(alpha = 0.5, show.legend = FALSE) +\n  geom_smooth(method = \"lm\", se = FALSE, size = 0.5, show.legend = FALSE) +\n  facet_wrap(vars(pctpell_cat)) +\n  labs(\n    x = \"Average faculty salary (USD)\",\n    y = \"Net cost of attendance (USD)\",\n    color = \"Percentage of Pell grant recipients\",\n    title = \"Faculty salaries and net cost of attendance in US universities\"\n  ) +\n  theme_minimal(base_size = 14) +\n  scale_color_viridis_d(end = 0.8, option = \"A\")\n```\n:::\n\n\n:::\n\n## Dark theme + further theme customization\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-30_68ca4f37a2c1432a47dfb15b0ae0cca5'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-30-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-31_7a817e7da4be6e24bebfeb0638c6f50a'}\n\n```{.r .cell-code  code-line-numbers=\"11-16\"}\nggplot(scorecard, aes(x = avgfacsal, y = netcost, color = pctpell_cat)) +\n  geom_point(alpha = 0.5, show.legend = FALSE) +\n  geom_smooth(method = \"lm\", se = FALSE, size = 0.5, show.legend = FALSE) +\n  facet_wrap(vars(pctpell_cat)) +\n  labs(\n    x = \"Average faculty salary (USD)\",\n    y = \"Net cost of attendance (USD)\",\n    color = \"Percentage of Pell grant recipients\",\n    title = \"Faculty salaries and net cost of attendance in US universities\"\n  ) +\n  theme_dark(base_size = 14) +\n  scale_color_manual(values = c(\"yellow\", \"blue\", \"orange\", \"red\", \"green\", \"white\")) +\n  theme(\n    text = element_text(color = \"red\", face = \"bold.italic\"),\n    plot.background = element_rect(fill = \"yellow\")\n  )\n```\n:::\n\n\n:::\n\n# What makes bad figures bad?\n\n## Bad taste\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-32_559264346f51f175f36c5212f818a064'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-32-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n## Data-to-ink ratio\n\n:::: columns\n\n::: {.column width=\"67%\"}\nTufte strongly recommends maximizing the **data-to-ink ratio** this in the Visual Display of Quantitative Information (Tufte, 1983).\n\n> Graphical excellence is the well-designed presentation of interesting data—a matter of substance, of statistics, and of design … [It] consists of complex ideas communicated with clarity, precision, and efficiency. … [It] is that which gives to the viewer the greatest number of ideas in the shortest time with the least ink in the smallest space … [It] is nearly always multivariate … And graphical excellence requires telling the truth about the data. (Tufte, 1983, p. 51).\n\n:::\n\n::: {.column width=\"33%\"}\n\n\n::: {.cell layout-align=\"right\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-33_dc88b4135f88c617f455e66f9cf3d402'}\n::: {.cell-output-display}\n![](images/03/tufte-visual-display-cover.png){fig-align='right' fig-alt='Cover of Visual Display of Quantitative Information, Tufte (1983).' width=100%}\n:::\n:::\n\n\n:::\n\n::::\n\n---\n\n::: {.appex}\n\nWhich of the plots has higher data-to-ink ratio?\n\n:::\n\n\n\n\n\n::: {.panel-tabset}\n\n### Plot A\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/mean-netcost-pctpell-a_085ac7007388f88a4e78008f973b8647'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/mean-netcost-pctpell-a-1.png){fig-align='center' width=70%}\n:::\n:::\n\n]\n\n### Plot B\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/mean-netcost-pctpell-b_6b9f372ac23f43b3441d081948b2d3a4'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/mean-netcost-pctpell-b-1.png){fig-align='center' width=70%}\n:::\n:::\n\n\n:::\n\n---\n\n::: {.appex .center}\na deeper look at the plotting code...\n:::\n\n## Summary statistics\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-37_0fe1d3eddf8f35288d835779a998f466'}\n\n```{.r .cell-code}\nmean_netcost_pctpell <- scorecard |>\n  group_by(pctpell_cat) |>\n  summarise(mean_netcost = mean(netcost, na.rm = TRUE))\n\nmean_netcost_pctpell\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 2\n  pctpell_cat   mean_netcost\n  <fct>                <dbl>\n1 [0,0.167]           29919.\n2 (0.167,0.333]       22579.\n3 (0.333,0.5]         19171.\n4 (0.5,0.667]         16966.\n5 (0.667,0.833]       15572.\n6 (0.833,1]           10138.\n```\n:::\n:::\n\n\n## Barplot\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-38_099a0b084868d5781a40a87dfedca02e'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-38-1.png){fig-align='center' width=70%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-39_bc63107e0e7fefd87ab064ecf3f21ab9'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(mean_netcost_pctpell, aes(y = pctpell_cat, x = mean_netcost)) +\n  geom_col() +\n  labs(\n    x = \"Mean net cost of attendance\", y = \"Pell grant recipients\",\n    title = \"Mean net cost of attendance, by Pell grant recipients\"\n  ) +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n:::\n\n## Scatterplot\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-40_3668d264a3b8db686bc9562a76741554'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/unnamed-chunk-40-1.png){fig-align='center' width=70%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-41_19b6a81c753fff8966b17bfece7c1516'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(mean_netcost_pctpell, aes(y = pctpell_cat, x = mean_netcost)) +\n  geom_point(size = 4) +\n  labs(\n    x = \"Mean net cost of attendance\", y = \"Pell grant recipients\",\n    title = \"Mean net cost of attendance, by Pell grant recipients\"\n  ) +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n:::\n\n## Lollipop plot -- a happy medium?\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/mean-netcost-pctpell-lollipop_de4bbe8c74728ddfd35629576d7504e4'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/mean-netcost-pctpell-lollipop-1.png){fig-align='center' width=70%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-43_d767f9077582ecd007cb5d84f0f81429'}\n\n```{.r .cell-code  code-line-numbers=\"3-8\"}\nggplot(mean_netcost_pctpell, aes(y = pctpell_cat, x = mean_netcost)) +\n  geom_point(size = 4) +\n  geom_segment(\n    aes(\n      x = 0, xend = mean_netcost,\n      y = pctpell_cat, yend = pctpell_cat\n    )\n  ) +\n  labs(\n    x = \"Mean net cost of attendance\", y = \"Pell grant recipients\",\n    title = \"Mean net cost of attendance, by Pell grant recipients\"\n  ) +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n:::\n\n## [Activity: Napoleon's disastrous Russian campaign of 1812]{.small}\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-44_7b1b2979386ccf54d4dfadc7b7759621'}\n::: {.cell-output-display}\n![](images/03/minard.jpg){fig-align='center' fig-alt='Minard’s visualization of Napoleon’s retreat' width=80%}\n:::\n:::\n\n\n::: aside\nSource: [Wikipedia](https://en.wikipedia.org/wiki/Charles_Joseph_Minard#/media/File:Minard.png)\n:::\n\n## Activity: Napoleon's retreat\n\n:::: columns\n\n::: {.column width=\"70%\"}\n\n::: {.appex .small}\n\nThis is Minard’s visualization of Napoleon’s retreat. Discuss in a pair (or group) the features of the following visualization. What are the variables plotted? Which aesthetics are they mapped to?\n\n:::\n\n:::\n\n::: {.column width=\"30%\"}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_97054c4f\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;font-size:5vw;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::\n\n::::\n\n![Source: [Wikipedia](https://commons.wikimedia.org/wiki/File:Redrawing_of_Minard%27s_Napoleon_map.svg)](https://upload.wikimedia.org/wikipedia/commons/d/db/Redrawing_of_Minard%27s_Napoleon_map.svg){fig-alt=\"A modern recreation of Minard’s visualization of Napoleon’s retreat\"}\n\n## Bad data\n\n::: {.panel-tabset}\n\n### Original\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-46_9984bc65d0e8ce55a02a9f0a41e2652f'}\n::: {.cell-output-display}\n![](images/03/healy-democracy-nyt-version.png){fig-align='center' fig-alt='A crisis of faith in democracy? New York Times.' width=50%}\n:::\n:::\n\n\n### Improved\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-47_4932eb38c45d197c5fa04ecd4725cc26'}\n::: {.cell-output-display}\n![](images/03/healy-democracy-voeten-version-2.png){fig-align='center' fig-alt='A crisis of faith in democracy? New York Times.' width=50%}\n:::\n:::\n\n\n:::\n\n::: aside\nHealy, Data Visualization: A practical introduction. [Chapter 1](https://socviz.co/lookatdata.html). Figures 1.8 and 1.9.\n:::\n\n## Bad perception\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-48_526d82ec788975ba5e86a3d52518bbde'}\n::: {.cell-output-display}\n![](images/03/healy-perception-curves.png){fig-align='center' fig-alt='Aspect ratios affect our perception of rates of change, modeled after an example by William S. Cleveland.' width=80%}\n:::\n:::\n\n\n::: aside\nHealy, Data Visualization: A practical introduction. [Chapter 1](https://socviz.co/lookatdata.html). Figure 1.12.\n:::\n\n# Aesthetic mappings in ggplot2\n\n## A second look: lollipop plot\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/mean-netcost-pctpell-lollipop-layer_f058e2adbd4f8821bd526ee71ac28def'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/mean-netcost-pctpell-lollipop-layer-1.png){fig-align='center' width=70%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-50_fcbbf9a99f8bf5a6d9427e242c88d7df'}\n\n```{.r .cell-code}\nggplot(mean_netcost_pctpell, aes(y = pctpell_cat, x = mean_netcost)) +\n  geom_point(size = 4) +\n  geom_segment(\n    aes(\n      x = 0, xend = mean_netcost,\n      y = pctpell_cat, yend = pctpell_cat\n    )\n  ) +\n  labs(\n    x = \"Mean net cost of attendance\", y = \"Pell grant recipients\",\n    title = \"Mean net cost of attendance, by Pell grant recipients\"\n  ) +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n:::\n\n## Activity: Spot the difference I\n\n::: appex\nCan you spot the differences between the code here and the one provided in the previous slide? Are there any differences in the resulting plot? Work in a pair (or group) to answer.\n:::\n\n::: {.panel-tabset}\n\n### Plot\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/mean-netcost-pctpell-lollipop-global_a7ef772dd5ca88bc91b61ff3e945fafc'}\n::: {.cell-output-display}\n![](03-look-at-data_files/figure-revealjs/mean-netcost-pctpell-lollipop-global-1.png){fig-align='center' width=50%}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell layout-align=\"center\" hash='03-look-at-data_cache/revealjs/unnamed-chunk-52_3846b3dbda0ccc1f385a3ddecf4d0dd5'}\n\n```{.r .cell-code  code-line-numbers=\"|1,4,5\"}\nggplot(mean_netcost_pctpell, aes(y = pctpell_cat, x = mean_netcost)) +\n  geom_point(size = 4) +\n  geom_segment(aes(\n    xend = 0,\n    yend = pctpell_cat\n  )) +\n  labs(\n    x = \"Mean net cost of attendance\", y = \"Pell grant recipients\",\n    title = \"Mean net cost of attendance, by Pell grant recipients\"\n  ) +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_12f2862f\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n## Global vs. layer-specific aesthetics\n\n- Aesthetic mappings can be supplied in the initial `ggplot()` call, in individual layers, or in some combination of both.\n\n- Within each layer, you can add, override, or remove mappings.\n\n- If you only have one layer in the plot, the way you specify aesthetics doesn’t make any difference. However, the distinction is important when you start adding additional layers.\n\n---\n\n## Wrap up\n\n::: {.appex .center}\nThink back to all the plots you saw in the lecture, without flipping back through the slides. Which plot first comes to mind? Describe it in words.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}